{% extends 'base.html' %}
{% block title %}Avis de la communauté{% endblock %}
{% block content %}
<h3>Avis de la communauté</h3>
<div class="card">
  <table>
    <thead>
      <tr>
        <th>Photo</th><th>Domaine</th><th>Nom</th><th>Type</th><th>Année</th><th>Région</th><th>Note moyenne</th><th>Nombre d'avis</th><th></th>
      </tr>
    </thead>
    <tbody>
      {% for g in groupes %}
        <tr>
          <td>
            {% if g.photo_etiquette %}
              <img src="{{ url_for('static', filename='images/' + g.photo_etiquette) }}" alt="Étiquette" style="width: 50px; height: 50px; object-fit: cover; border-radius: 4px;">
            {% else %}
              <span style="color: #ccc;">—</span>
            {% endif %}
          </td>
          <td>{{ g.domaine_viticole }}</td>
          <td>{{ g.nom }}</td>
          <td>{{ g.type }}</td>
          <td>{{ g.annee }}</td>
          <td>{{ g.region }}</td>
          <td>{% if g.moyenne is not none %}{{ '%.1f'|format(g.moyenne) }}{% endif %}</td>
          <td>{{ g.nb_avis }}</td>
          <td><a class="btn" href="{{ url_for('avis_details', domaine_viticole=g.domaine_viticole, nom=g.nom, type=g.type, annee=g.annee, region=g.region) }}">Voir</a></td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}


